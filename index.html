<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Rapid Medical Response - User</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="icon" href="data:," />

  <!-- Font Awesome for icons -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- App Header -->
  <header class="app-header">
    <div class="app-title">
      <div class="logo-mark">
        <i class="fa-solid fa-kit-medical"></i>
      </div>
      <div>
        <h1>Rapid Medical Response</h1>
        <p class="subtitle">Simple help during medical emergencies</p>
      </div>
    </div>
  </header>

  <!-- App navigation (Emergency + Safety Tips) -->
  <nav class="tab-nav" aria-label="Main navigation">
    <button class="tab-btn tab-btn-active" data-target="home-screen">
      <i class="fa-solid fa-house-chimney"></i>
      Emergency
    </button>
    <button class="tab-btn" data-target="tips-screen">
      <i class="fa-solid fa-shield-heart"></i>
      Safety Tips
    </button>
  </nav>

  <main class="app-main">
    <!-- HERO / BANNER -->
    <section class="hero-banner" aria-label="Emergency help banner">
      <div class="hero-text">
        <h2>One tap for rapid help.</h2>
        <p>Designed for Indian families, elderly users, and non-technical people.</p>
      </div>
      <div class="hero-badge">
        <span class="badge-label">
          <i class="fa-solid fa-clock"></i>
          Target response: 5–10 minutes
        </span>
      </div>
    </section>

    <!-- 1️⃣ HOME PAGE -->
    <section id="home-screen" class="page-section" aria-labelledby="home-heading">
      <h2 id="home-heading" class="visually-hidden">Home</h2>

      <div class="card center-card">
        <p class="home-instruction">
          In a medical emergency, tap the red button below.
        </p>

        <!-- Big panic-friendly emergency button -->
        <button id="emergency-btn" class="btn btn-emergency" aria-label="Trigger emergency">
          <i class="fa-solid fa-triangle-exclamation"></i>
          EMERGENCY
        </button>

        <p class="warning-text">
          Tap only in real medical emergencies.
        </p>
      </div>

      <!-- Quick "How it works" -->
      <div class="card info-steps-card" aria-label="How the app works">
        <h3 class="section-title">How it works</h3>
        <ol class="steps-list">
          <li>
            <span class="step-icon">1</span>
            <span>App detects your location and sends an emergency alert.</span>
          </li>
          <li>
            <span class="step-icon">2</span>
            <span>Nearest ambulance and hospital are automatically selected.</span>
          </li>
          <li>
            <span class="step-icon">3</span>
            <span>AI-like guidance helps you give first aid until help arrives.</span>
          </li>
        </ol>
      </div>
    </section>

    <!-- 2️⃣ EMERGENCY PROCESSING SECTION -->
    <section
      id="processing-screen"
      class="hidden"
      aria-live="polite"
      aria-busy="true"
    >
      <div class="card center-card">
        <div class="spinner" aria-hidden="true"></div>
        <p class="processing-text">
          Locating nearest ambulance and hospital…
        </p>
        <p class="small-muted">
          This may take a few seconds while we detect your location.
        </p>
      </div>
    </section>

    <!-- 3️⃣ EMERGENCY ACTIVE SECTION -->
    <section
      id="active-emergency-screen"
      class="hidden"
      aria-live="polite"
    >
      <!-- Map / location -->
      <div class="card map-card" aria-label="Location map">
        <p class="map-title">
          <i class="fa-solid fa-location-dot"></i>
          Your location and route (example view)
        </p>
        <div id="map-placeholder">
          <iframe
            id="map-frame"
            title="Map showing your location"
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
          <p class="map-placeholder-text">
            Map is centered near your current location (approximate).
          </p>
          <p id="location-text" class="small-muted">
            Detecting your location…
          </p>
          <a
            id="open-full-map-link"
            href="#"
            target="_blank"
            rel="noopener noreferrer"
            class="full-map-link hidden"
          >
            Open in full map
          </a>
        </div>
      </div>

      <!-- Status indicators -->
      <div class="card">
        <h3 class="section-title">
          Emergency status
        </h3>
        <ul class="status-list">
          <li class="status-item">
            <span class="status-label">Emergency request sent</span>
            <span class="status-icon status-pending" id="status-request">
              ⏳
            </span>
          </li>
          <li class="status-item">
            <span class="status-label">Nearest ambulance located</span>
            <span class="status-icon status-pending" id="status-ambulance">
              ⏳
            </span>
          </li>
          <li class="status-item">
            <span class="status-label">Hospital notified and preparing</span>
            <span class="status-icon status-pending" id="status-hospital">
              ⏳
            </span>
          </li>
        </ul>
      </div>

      <!-- Ambulance info card -->
      <div class="card" aria-label="Ambulance details">
        <h3 class="section-title">
          Ambulance details
        </h3>
        <p class="info-row">
          <span class="info-label">Ambulance:</span>
          <span id="ambulance-name">Finding…</span>
        </p>
        <p class="info-row">
          <span class="info-label">Distance:</span>
          <span id="ambulance-distance">-- km</span>
        </p>
        <p class="info-row">
          <span class="info-label">Estimated time:</span>
          <span id="ambulance-eta">-- minutes</span>
        </p>
        <button
          id="call-driver-btn"
          class="btn btn-primary"
          disabled
        >
          <i class="fa-solid fa-phone"></i>
          Call driver
        </button>
        <p class="small-muted" id="driver-number-text"></p>
      </div>

      <!-- Hospital info card -->
      <div class="card" aria-label="Hospital details">
        <h3 class="section-title">
          Hospital status
        </h3>
        <p class="info-row">
          <span class="info-label">Hospital:</span>
          <span id="hospital-name">Finding…</span>
        </p>
        <p class="info-row">
          <span class="info-label">Status:</span>
          <span class="status-chip status-chip-preparing">
            Preparing for treatment
          </span>
        </p>
      </div>

      <!-- First Aid Guidance button -->
      <div class="card card-guidance-cta">
        <button id="open-first-aid-btn" class="btn btn-guidance">
          <i class="fa-solid fa-heart-pulse"></i>
          Open first-aid guidance
        </button>
        <p class="small-muted">
          Use this while waiting for medical help.
        </p>
      </div>
    </section>

    <!-- 4️⃣ AI-BASED FIRST AID GUIDANCE SECTION (chat-like) -->
    <section
      id="first-aid-screen"
      class="hidden"
      aria-live="polite"
    >
      <div class="card first-aid-card">
        <h3 class="section-title">
          First-aid guidance
        </h3>
        <p class="small-muted">
          Answer these quick questions. We will adapt the steps to your emergency.
        </p>

        <!-- Chat area -->
        <div id="chat-log" class="chat-log" aria-label="First-aid guidance conversation">
          <!-- Messages will be injected by JavaScript -->
        </div>

        <!-- Current options (dynamic buttons) -->
        <div id="chat-options" class="chat-options"></div>

        <div class="chat-footer-row">
          <button id="reset-guidance-btn" class="btn btn-small btn-outline">
            Restart questions
          </button>
        </div>

        <p class="warning-footer">
          This guidance is for immediate assistance only and does not
          replace professional medical care.
        </p>
      </div>
    </section>

    <!-- Safety tips page -->
    <section id="tips-screen" class="page-section hidden" aria-labelledby="tips-heading">
      <h2 id="tips-heading" class="visually-hidden">Safety Tips</h2>

      <div class="card">
        <h3 class="section-title">Before an emergency</h3>
        <ul class="tips-list">
          <li>Keep your phone charged and nearby at night.</li>
          <li>Share your exact address and landmarks with family members.</li>
          <li>Know at least one nearby hospital and its route.</li>
        </ul>
      </div>

      <div class="card">
        <h3 class="section-title">During an emergency</h3>
        <ul class="tips-list">
          <li>Stay calm and speak clearly to the ambulance driver.</li>
          <li>Move away from traffic and unsafe areas if possible.</li>
          <li>Follow the first-aid guidance and do not crowd the patient.</li>
        </ul>
      </div>

      <div class="card">
        <h3 class="section-title">After help arrives</h3>
        <ul class="tips-list">
          <li>Share medicines, reports, and known health conditions.</li>
          <li>Carry an ID or Aadhaar card if possible.</li>
          <li>Update your family about the hospital you are going to.</li>
        </ul>
      </div>
    </section>
  </main>

  <!-- Small toast / message area -->
  <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>

  <script src="script.js"></script>
</body>
</html>